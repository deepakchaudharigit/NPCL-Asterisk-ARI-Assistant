<<<<<<< HEAD
[general]
static=yes
writeprotect=no
clearglobalvars=no

[globals]
; Global variables for the Gemini voice assistant
GEMINI_APP=gemini-voice-assistant
EXTERNAL_MEDIA_HOST=localhost
EXTERNAL_MEDIA_PORT=8090

[gemini-voice-assistant]
; Gemini Voice Assistant with Real-time Audio Processing
; Main extension for Gemini Live API integration
exten => 1000,1,NoOp(Gemini Voice Assistant Call - Real-time)
same => n,Set(CHANNEL(hangup_handler_push)=hangup-handler,s,1)
same => n,Answer()
same => n,Set(TALK_DETECT(set)=4,160)  ; Enable talk detection
same => n,Stasis(${GEMINI_APP},${CALLERID(num)},${EXTEN})
same => n,Hangup()

; Alternative extension for testing external media directly
exten => 1001,1,NoOp(Gemini Voice Assistant - External Media Test)
same => n,Answer()
same => n,ExternalMedia(ws://${EXTERNAL_MEDIA_HOST}:${EXTERNAL_MEDIA_PORT}/external_media/${CHANNEL(name)},slin16)
same => n,Hangup()

; Test extension for basic functionality
exten => 1002,1,NoOp(Basic Test Extension)
same => n,Answer()
same => n,Playback(hello-world)
same => n,Echo()  ; Echo test for audio verification
same => n,Hangup()

; Conference room for testing multiple participants
exten => 1003,1,NoOp(Conference Test)
same => n,Answer()
same => n,ConfBridge(test-room)
same => n,Hangup()

; Recording test extension
exten => 1004,1,NoOp(Recording Test)
same => n,Answer()
same => n,Playback(beep)
same => n,Record(test-recording:wav,10,k)
same => n,Playback(test-recording)
same => n,Hangup()

; Emergency fallback for any other extension
exten => _X.,1,NoOp(Fallback for ${EXTEN})
same => n,Answer()
same => n,Playback(invalid)
same => n,Wait(1)
same => n,Hangup()

; Hangup handler for cleanup
[hangup-handler]
exten => s,1,NoOp(Hangup handler for ${CHANNEL})
same => n,System(echo "Call ended: ${CHANNEL} at $(date)" >> /var/log/asterisk/gemini-calls.log)
same => n,Return()

[default]
include => gemini-voice-assistant

; Inbound context for SIP calls
[from-sip]
include => gemini-voice-assistant

; Context for internal calls
[internal]
include => gemini-voice-assistant
=======
[default]
exten => 1000,1,Answer()
 same => n,Stasis(voiceapp)
 same => n,Hangup()
>>>>>>> 978c090094b55f79e8769e28b18536e68993dd09
